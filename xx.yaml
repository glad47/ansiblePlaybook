---
- name: ğŸ³ Build custom image from hello-world using Docker
  hosts: localhost
  gather_facts: false
  become: true
  tasks:

    - name: ğŸ“ Create build directory
      file:
        path: /tmp/hello-world-image
        state: directory

    - name: ğŸ“ Write a basic Dockerfile
      copy:
        dest: /tmp/hello-world-image/Dockerfile
        content: |
          FROM hello-world

    - name: ğŸ› ï¸ Build image using Docker
      shell: sudo podman build -t custom-hello-world /tmp/hello-world-image
      register: build_output

    - name: ğŸ“‹ Show build logs
      debug:
        var: build_output.stdout_lines
